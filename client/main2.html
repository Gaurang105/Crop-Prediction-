<html>

<head>
    <title>Crop Prediction</title>
    <link rel="icon" type="image/x-icon" href="favi.png">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
</head>

<body>


    <div class="container" id="container">

        <div class="form-container next-step-container">

            <form action="#">
                <h1>Crop Recommended:</h1>
                <div class="box">
                    <ul id="recList">

                    </ul>
                </div>

                <!--output will come here-->
            </form>
        </div>
        <div class="form-container back-step-container">
            <form action="#">
                <div class="simple">
                    <button class="sim s"><a href="main2.html">Simple</a></button>
                    <button class="int i"><a href="main.html">Intermediate</a></button>
                </div>

                <img src="cutecropp.png" class="crop" alt="cute-crop img" width="270px"  height="270px">
                <!-- <input list="browsers" class="states" id="state" placeholder="State" /> -->
                <select name="state-choice" id="stateDropDown" class="states">
                    <option value="Andhra">Andhra</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Kerela">Kerela</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="Gujrat">Gujrat</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Orissa">Orissa</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="West Bengal">West Bengal</option>
                    <option value="Assam">Assam</option>
                    <option value="Chattisgarh">Chattisgarh</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Goa">Goa</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Nagaland">Nagaland</option>
                </select>
            </form>
        </div>
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <img src="fam.png" alt="farmer-img" width="150px" height="270px">
                    <h1>Is something wrong?</h1>
                    <p>No worries! You can change the details.</p>
                    <button class="ghost" id="back-step">Back</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>Crop Recommendation</h1>
                    <img src="cropwomen.jpg" class="women" alt="farmer-img" width="120px"  height="150px">
                    <p>The crop which can be grown on the field as per your details is:</p>

                    <button class="ghost" id="submit" onclick="submitStateData()">Submit</button>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        function submitStateData() {
            console.log("uwu");
            let stateDropDown = document.getElementById("stateDropDown");

            let config = {
                params: {
                    state: stateDropDown.value
                }
            }

            axios.get('http://127.0.0.1:8000/api/basictop5', config).then(function (response) {
                let recList = document.getElementById("recList");
                let preds = response.data.predictions

                for (let pred of preds) {
                    recList.innerHTML += "<li>" + pred + "</li>";
                }
                console.log(response.data.predictions);
            })
        }
    </script>
</body>

</html>